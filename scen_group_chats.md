# Групировка каналов и чатов

**Акторы:** 

- Пользователь
- Приложение
- Бекенд
- База данных

**Цель:** Пользователь группирует каналы и чаты, чтобы вынести их на отдельную вкладку.

**Предусловия:** У пользователя есть аккаунт в приложении, пользователь зашел в приложение, у пользователя больше одного чата и/или канала, у пользователя открыт список всех чатов и каналов.

**Сценарий:**

1. Пользователь нажимает на кнопку "Создать новую группу".

Если пользователь хочет не создать новую группу, а добавить чат(ы) и/или канал(ы) в уже существующую группу, то должен выполняться сценарий [Добавление каналов и чатов в группу]

2. Приложение показывает список всех чатов и каналов в виде чек-листа.
3. Пользователь выбирает нужные чаты и каналы.
4. Приложение отмечает выбранные чаты и каналы галочкой.
5. Пользователь переходит к следующему шагу, нажав на кнопку "Готово".
6. Приложение показывает форму для ввода названия группы и выбора цвета вкладки.

Если польхователь не выбрал цвет вкладки), то начнется сценарий [Создание группы по умолчанию].

7. Пользователь вводит название группы и выбирает цвет вкладки, затем нажимает на кнопку готово.
8. Приложение отправляет бекенду информацию о создании новой группы чатов и/или каналов у данного пользователя:

`/user/group/create?join=[chat1,chat2,channel1,..]&name=groupname&color=green`.

8. Бекенд отправляет запрос к базе данных для создания группы чатов и каналов у данного пользователя.

{Успешное добавление данных в базу}

9. Бекенд отправляет интерфейсу сообщение о успешном добвлении данных группы.
10. Приложение открывает вкладку новой группы.

**Результат:**

- Открыается вкладка группы.
- Новая группа видна в списке групп и среди вкладок групп.
- Появилась возможность добавить чат или канал в существующую группу, удалить чат или канал из группы или удалить группу.
- У добавленных чатов и каналов появляется знчаок группы соответсвующего ей цвета.
- В профиле пользователя появляется значок при появлении новых сообщений в группе.
- В базе данных добавлена новая группа.

**Исключения:**

3а. Пользоваель не выбрал ни одного чата или канала.
5а. Выбранный чат или канал уже входит в какую-то группу.
7а. Пользователь не ввел название группы.
8а. Бекенд возвращает 500.

**Альтернативный сценарий:** 

1а. [Добавление каналов и чатов в группу], если группа уже существует.
1а1. Пользователь нажимает на кнопку "Добавить в группу".
1а2. Повторение 2-5 шага основного сценария.
1а3. Приложение отправляет бекенду информацию о добавлении чатов и/или каналов в группу:

`/user/group/add?join=[chat1,chat2,channel1,..]&id=groupId`.

1а4. Бекенд отправляет запрос к базе данных для добавления чатов и каналов в группу.

{Успешное добавление данных в базу}

1а5. Бекенд отправляет интерфейсу сообщение о успешном добвлении данных чатов и каналов в данные группы.
1а6. Приложение открывает вкладку группы с добавленными чатами и каналами.

**Результат альтернативного сценария:**

- Открыается вкладка группы.
- У добавленных чатов и каналов появляется знчаок группы соответсвующего ей цвета.
- В базе данных добавлены новые чаты и каналы к группе.

