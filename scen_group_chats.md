# Групировка каналов и чатов

**Акторы:** 

- Пользователь
- Приложение
- Бекенд
- База данных

**Цель:** Пользователь группирует каналы и чаты, чтобы вынести их на отдельную вкладку.

**Предусловия:** У пользователя есть аккаунт в приложении, пользователь зашел в приложение, у пользователя больше одного чата и/или канала, открыт список всех чатов и каналов.

**Сценарий:**

1. Пользователь выбирает действие "Создать новую группу".

Если пользователь хочет не создать новую группу, а добавить чат(ы) и/или канал(ы) в уже существующую группу, то должен выполняться сценарий [Добавление каналов и чатов в группу]

2. Приложение показывает список всех чатов и каналов.
3. Пользователь выбирает нужные чаты и каналы.
4. Приложение отмечает выбранные чаты и каналы.
5. Пользователь переходит к следующему шагу.
6. Приложение показывает форму для ввода информации о группе.
7. Пользователь вводит название группы и другую информацию о ней.

Если пользователь не ввел всю обязательную информацию, то начнется сценарий [Создание группы по умолчанию].

8. Приложение отправляет бекенду информацию о создании новой группы чатов и/или каналов у данного пользователя:

    `/user/group/create?join=[chat1,chat2,channel1,..]&info={ groupinfo }`.

9. Бекенд отправляет запрос к базе данных для создания группы чатов и каналов у данного пользователя.

    {Успешное добавление данных в базу}

10. Бекенд отправляет интерфейсу сообщение о успешном добавлении данных группы.
11. Приложение открывает вкладку новой группы.

**Результат:**

- Открывается вкладка группы.
- В группе появляется информация о чатах и каналах.
- Новая группа видна в списке групп и среди вкладок групп.
- У добавленных чатов и каналов появляется информация о группе.
- В профиле пользователя появляется информация при появлении новых сообщений в группе.
- В базу данных добавлены данные новой группы.
- Появляется возможность выполнения сценариев [Добавление каналов и чатов в группу], [Удаление чата или канала из группы] и [Удаление группы чатов и каналов].

**Исключения:**

3а. Пользователь не выбрал ни одного чата или канала.
5а. Выбранный чат или канал уже входит в какую-то группу.
7а. Пользователь не ввел название группы.
9а. Бекенд возвращает 500.

**Альтернативный сценарий:** 

7а. [Создание группы по умолчанию], если пользователь не ввел всю обязательную информацию.
7а1. Устанавливается информация о группе по умолчанию.
7а2. Возврат на шаг 8 основного сценария.
